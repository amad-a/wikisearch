(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{13:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(6),c=r.n(i),s=(r(13),r(5)),o=r.n(s),u=r(7),h=r(3),g=r(2),p=r(0),b=function(e){var t;return Object(p.jsx)("form",{onSubmit:e.Search,children:Object(p.jsxs)("div",{className:"search-form",children:[Object(p.jsx)("input",(t={className:"Search-input",type:"text"},Object(g.a)(t,"className","Textbox"),Object(g.a)(t,"name","searchTerm"),Object(g.a)(t,"placeholder","show me a..."),t)),Object(p.jsx)("button",{className:"Search-button",children:"Dither!"})]})})},j=r(8),l=function(e){var t=Object(n.useRef)(null),r=function(t,r){var n=new Image;n.crossOrigin="anonymous",n.src=e.src;var a=300,i=e.h;t.width;n.crossOrigin="anonymous",t.drawImage(n,0,0,a,i);var c=t.getImageData(0,0,a,i),s=c.data,o=s.length;function u(e){var t=parseInt((e.r+e.g+e.b)/3>128?255:0);return{r:t,g:t,b:t,a:255}}function h(e,t){var r=parseInt((e.r+e.g+e.b)/3),n=parseInt((t.r+t.g+t.b)/3);return{r:r-n,g:r-n,b:r-n,a:255}}for(var g=0;g<o;g+=4){var p={r:s[g+0],g:s[g+1],b:s[g+2],a:s[g+3]},b=u(p);s[g+0]=b.r,s[g+1]=b.g,s[g+2]=b.b,s[g+3]=b.a;var j=h(p,b);try{s[g+0+4]+=7/16*j.r,s[g+1+4]+=7/16*j.g,s[g+2+4]+=7/16*j.b,s[g+3+4]+=7/16*j.a}catch(l){}try{s[g+0-4+4*a]+=3/16*j.r,s[g+1-4+4*a]+=3/16*j.g,s[g+2-4+4*a]+=3/16*j.b,s[g+3-4+4*a]+=3/16*j.a}catch(l){}try{s[g+0+4*a]+=5/16*j.r,s[g+1+4*a]+=5/16*j.g,s[g+2+4*a]+=5/16*j.b,s[g+3+4*a]+=5/16*j.a}catch(l){}try{s[g+0+4+4*a]+=1/16*j.r,s[g+1+4+4*a]+=1/16*j.g,s[g+2+4+4*a]+=1/16*j.b,s[g+3+4+4*a]+=1/16*j.a}catch(l){}}t.putImageData(c,0,0)};return Object(n.useEffect)((function(){var e,n=t.current,a=n.getContext("2d"),i=function(){window.cancelAnimationFrame(e)};return function t(){r(a),e=window.requestAnimationFrame(t),console.log("frame: "+e),setTimeout(i,2e3)}(),function(){window.cancelAnimationFrame(e)}}),[r]),Object(p.jsx)("canvas",Object(j.a)({width:e.w,height:e.h,ref:t},e))},d=r(16),m=function(){var e=Object(n.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(h.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)("Dolphin dithered"),c=Object(h.a)(i,2),s=c[0],g=c[1],j=Object(n.useState)(300),m=Object(h.a)(j,2),O=m[0],f=m[1],w=Object(n.useState)(210),x=Object(h.a)(w,2),v=x[0],y=x[1],k=function(){var e=Object(u.a)(o.a.mark((function e(t){var r,n,i,c,s,u,h,p,b,j,l,m,O,w,x,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.elements.searchTerm.value){e.next=5;break}return g("check 1"),e.abrupt("return");case 5:return n="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(r,"&format=json"),e.next=8,d(n);case 8:return i=e.sent,e.next=11,i.json();case 11:if(c=e.sent,console.log("search json: "+c),0!==c[3].length){e.next=16;break}return g("no image found :("),e.abrupt("return");case 16:return s=c[3][0],console.log("term 1: "+s),u=c[3][1],console.log("term 2: "+u),b="https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=pageimages&format=json&piprop=original&titles=".concat(s.substr(30)),e.next=23,d(b);case 23:return j=e.sent,e.next=26,j.json();case 26:if(h=e.sent,!u){e.next=35;break}return l="https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=pageimages&format=json&piprop=original&titles=".concat(u.substr(30)),e.next=31,d(l);case 31:return m=e.sent,e.next=34,m.json();case 34:p=e.sent;case 35:Object.entries(h.query.pages)[0][1].original?(a(Object.entries(h.query.pages)[0][1].original.source),g(c[1][0]+" dithered"),O=Object.entries(h.query.pages)[0][1].original.width,w=Object.entries(h.query.pages)[0][1].original.height,f(300),y(Math.floor(300/O*w))):p&&Object.entries(p.query.pages)[0][1].original?(a(Object.entries(p.query.pages)[0][1].original.source),g(c[1][0]+" dithered"),x=Object.entries(p.query.pages)[0][1].original.width,v=Object.entries(p.query.pages)[0][1].original.height,f(300),y(Math.floor(300/x*v))):(g("no image found :("),a(""));case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"Box",children:[Object(p.jsx)("h3",{children:"WikiDither"}),Object(p.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(p.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(p.jsx)(b,{Search:k}),"\xa0",Object(p.jsx)(l,{className:"dithered-image",id:"wiki_dither",src:r,w:O,h:v}),Object(p.jsx)("p",{className:"caption",children:s})]})})};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.25f28d23.chunk.js.map