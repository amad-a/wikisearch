(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{13:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),i=r(6),c=r.n(i),s=(r(13),r(5)),o=r.n(s),u=r(7),h=r(3),p=r(2),g=r(0),d=function(e){var t;return Object(g.jsx)("form",{onSubmit:e.Search,children:Object(g.jsxs)("div",{className:"search-form",children:[Object(g.jsx)("input",(t={className:"Search-input",type:"text"},Object(p.a)(t,"className","Textbox"),Object(p.a)(t,"name","searchTerm"),Object(p.a)(t,"placeholder","show me a..."),t)),Object(g.jsx)("button",{className:"Search-button",children:"Dither!"})]})})},b=r(8),l=function(e){var t=Object(a.useRef)(null),r=function(t,r){var a=new Image;a.crossOrigin="anonymous",a.src=e.src;var n=300,i=e.h;t.width;a.crossOrigin="anonymous",t.drawImage(a,0,0,n,i);var c=t.getImageData(0,0,n,i),s=c.data,o=s.length;function u(e){var t=parseInt((e.r+e.g+e.b)/3>128?255:0);return{r:t,g:t,b:t,a:255}}function h(e,t){var r=parseInt((e.r+e.g+e.b)/3),a=parseInt((t.r+t.g+t.b)/3);return{r:r-a,g:r-a,b:r-a,a:255}}for(var p=0;p<o;p+=4){var g={r:s[p+0],g:s[p+1],b:s[p+2],a:s[p+3]},d=u(g);s[p+0]=d.r,s[p+1]=d.g,s[p+2]=d.b,s[p+3]=d.a;var b=h(g,d);try{s[p+0+4]+=7/16*b.r,s[p+1+4]+=7/16*b.g,s[p+2+4]+=7/16*b.b,s[p+3+4]+=7/16*b.a}catch(l){}try{s[p+0-4+4*n]+=3/16*b.r,s[p+1-4+4*n]+=3/16*b.g,s[p+2-4+4*n]+=3/16*b.b,s[p+3-4+4*n]+=3/16*b.a}catch(l){}try{s[p+0+4*n]+=5/16*b.r,s[p+1+4*n]+=5/16*b.g,s[p+2+4*n]+=5/16*b.b,s[p+3+4*n]+=5/16*b.a}catch(l){}try{s[p+0+4+4*n]+=1/16*b.r,s[p+1+4+4*n]+=1/16*b.g,s[p+2+4+4*n]+=1/16*b.b,s[p+3+4+4*n]+=1/16*b.a}catch(l){}}t.putImageData(c,0,0)};return Object(a.useEffect)((function(){var e,a=t.current,n=a.getContext("2d"),i=function(){window.cancelAnimationFrame(e)};return function t(){r(n),e=window.requestAnimationFrame(t),console.log("frame: "+e),setTimeout(i,2e3)}(),function(){window.cancelAnimationFrame(e)}}),[r]),Object(g.jsx)("canvas",Object(b.a)({width:e.w,height:e.h,ref:t},e))},m=r(16),j=function(){var e=Object(a.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(h.a)(e,2),r=t[0],n=t[1],i=Object(a.useState)("Dolphin dithered"),c=Object(h.a)(i,2),s=c[0],p=c[1],b=Object(a.useState)(300),j=Object(h.a)(b,2),f=j[0],O=j[1],w=Object(a.useState)(210),x=Object(h.a)(w,2),v=x[0],y=x[1],k=function(){var e=Object(u.a)(o.a.mark((function e(t){var r,a,i,c,s,u,h,g,d,b,l,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.elements.searchTerm.value){e.next=4;break}return e.abrupt("return");case 4:return a=encodeURIComponent(r),i="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(a,"&format=json"),e.next=8,m(i);case 8:return c=e.sent,e.next=11,c.json();case 11:return s=e.sent,u=s[1][0],h=encodeURIComponent(s[1][0]),g="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages%7Cpageterms&titles=".concat(h,"&pilimit=3&piprop=original&pilicense=any&wbptterms=description&redirects="),e.next=17,m(g);case 17:return d=e.sent,e.next=20,d.json();case 20:if(!(b=e.sent).query.pages[0].hasOwnProperty("original")){e.next=34;break}if(!(b.query.pages[0].original.width>7e3)){e.next=25;break}return p("image too large!"),e.abrupt("return");case 25:console.log(b.query.pages[0].original),l=b.query.pages[0].original.width,j=b.query.pages[0].original.height,n(b.query.pages[0].original.source),O(300),y(Math.floor(300/l*j)),p(u+" dithered"),e.next=36;break;case 34:return p("image not found!"),e.abrupt("return");case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"Box",children:[Object(g.jsx)("h3",{children:"WikiDither"}),Object(g.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(g.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(g.jsx)(d,{Search:k}),"\xa0",Object(g.jsx)(l,{className:"dithered-image",id:"wiki_dither",src:r,w:f,h:v}),Object(g.jsx)("p",{className:"caption",children:s})]})})};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(j,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6dffd4ab.chunk.js.map