(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{12:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(5),o=n.n(i),c=(n(12),n(4)),s=n.n(c),u=n(6),l=n(2),p=n(0),h=function(e){return Object(p.jsx)("form",{onSubmit:e.Search,children:Object(p.jsxs)("div",{className:"search-form",children:[Object(p.jsx)("input",{type:"text",className:"Textbox",name:"searchTerm",placeholder:"show me a..."}),Object(p.jsx)("button",{name:"bw",className:"bw-button",children:"Dither in b & w"}),Object(p.jsx)("button",{name:"color",className:"color-button",children:"Dither in color"})]})})},d=n(7),g=function(e){var t=Object(r.useRef)(null),n=function(t){var n=new Image;n.crossOrigin="anonymous",n.src=e.src;var r=300,a=e.h;n.crossOrigin="anonymous",t.drawImage(n,0,0,r,a);for(var i=t.getImageData(0,0,r,a),o=i.data,c=o.length,s=function(t){if("color"===e.option)return{r:Math.floor(t.r/32)<<6,g:Math.floor(t.g/32)<<6,b:Math.floor(t.b/32)<<6,a:255};var n=parseInt((t.r+t.g+t.b)/3>128?255:0);return{r:n,g:n,b:n,a:255}},u=function(e,t){var n=parseInt((e.r+e.g+e.b)/3),r=parseInt((t.r+t.g+t.b)/3);return{r:n-r,g:n-r,b:n-r,a:255}},l=0;l<c;l+=4){var p={r:o[l+0],g:o[l+1],b:o[l+2],a:o[l+3]},h=s(p);o[l+0]=h.r,o[l+1]=h.g,o[l+2]=h.b,o[l+3]=h.a;var d=u(p,h);try{o[l+0+4]+=7/16*d.r,o[l+1+4]+=7/16*d.g,o[l+2+4]+=7/16*d.b,o[l+3+4]+=7/16*d.a}catch(g){console.log(g)}try{o[l+0-4+4*r]+=3/16*d.r,o[l+1-4+4*r]+=3/16*d.g,o[l+2-4+4*r]+=3/16*d.b,o[l+3-4+4*r]+=3/16*d.a}catch(g){console.log(g)}try{o[l+0+4*r]+=5/16*d.r,o[l+1+4*r]+=5/16*d.g,o[l+2+4*r]+=5/16*d.b,o[l+3+4*r]+=5/16*d.a}catch(g){console.log(g)}try{o[l+0+4+4*r]+=1/16*d.r,o[l+1+4+4*r]+=1/16*d.g,o[l+2+4+4*r]+=1/16*d.b,o[l+3+4+4*r]+=1/16*d.a}catch(g){console.log(g)}}t.putImageData(i,0,0)};return Object(r.useEffect)((function(){var e,r=t.current.getContext("2d"),a=function(){window.cancelAnimationFrame(e)};return function t(){n(r),e=window.requestAnimationFrame(t),setTimeout(a,2e3)}(),function(){window.cancelAnimationFrame(e)}}),[n]),Object(p.jsx)("canvas",Object(d.a)({id:"ditherCanvas",width:e.w,height:e.h,ref:t},e))},b=n(15),m=function(){var e=Object(r.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("Dolphin dithered"),o=Object(l.a)(i,2),c=o[0],d=o[1],m=Object(r.useState)(300),j=Object(l.a)(m,2),f=j[0],w=j[1],O=Object(r.useState)(210),x=Object(l.a)(O,2),y=x[0],v=x[1],k=Object(r.useState)("color"),q=Object(l.a)(k,2),I=q[0],N=q[1],S=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,i,o,c,u,l,p,h,g,m,j,f,O,x,y,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements.searchTerm.value,r=t.nativeEvent.submitter.name,console.log("type: "+r),n){e.next=6;break}return e.abrupt("return");case 6:return i=encodeURIComponent(n),o="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(i,"&format=json"),e.next=11,b(o);case 11:return c=e.sent,e.next=14,c.json();case 14:return u=e.sent,u[1][0],l=encodeURIComponent(u[1][0]),p="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages&piprop=thumbnail&pithumbsize=600&titles=".concat(l),h="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages%7Cpageterms&titles=".concat(l,"&pilimit=3&piprop=original&pilicense=any&wbptterms=description&redirects="),e.next=21,b(p);case 21:return g=e.sent,e.next=24,g.json();case 24:return m=e.sent,e.next=27,b(h);case 27:return j=e.sent,e.next=30,j.json();case 30:if(f=e.sent,!m.query.pages[0].hasOwnProperty("thumbnail")){e.next=42;break}console.log("thumbnail found: "+m.query.pages[0]),O=m.query.pages[0].thumbnail.width,x=m.query.pages[0].thumbnail.height,a(m.query.pages[0].thumbnail.source),w(300),v(Math.floor(300/O*x)),d(m.query.pages[0].title+" dithered"),N(r),e.next=55;break;case 42:if(!f.query.pages[0].hasOwnProperty("original")){e.next=53;break}console.log("original used: "+f.query.pages[0]),y=f.query.pages[0].original.width,k=f.query.pages[0].original.height,a(f.query.pages[0].original.source),w(300),v(Math.floor(300/y*k)),d(f.query.pages[0].title+" dithered"),N(r),e.next=55;break;case 53:return d("image not found!"),e.abrupt("return");case 55:case 56:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"Box",children:[Object(p.jsx)("h3",{children:"WikiDither"}),Object(p.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(p.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(p.jsx)(h,{Search:S}),"\xa0",Object(p.jsx)(g,{className:"dithered-image",id:"wiki_dither",src:n,w:f,h:y,option:I}),Object(p.jsxs)("div",{className:"caption-grid",children:[Object(p.jsx)("p",{className:"caption",children:c}),Object(p.jsx)("a",{className:"download-container",id:"download",download:"dithered_image.png",children:Object(p.jsx)("button",{type:"button",className:"download-button",onClick:function(){return function(){var e=document.getElementById("download"),t=document.getElementById("wiki_dither").toDataURL("image/png").replace("image/png","image/octet-stream");e.setAttribute("href",t)}()},children:"Download \u21b4"})})]})]})})};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.074f8f5a.chunk.js.map