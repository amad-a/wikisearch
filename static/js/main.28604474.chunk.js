(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{165:function(e,t,r){"use strict";r.r(t);var n=r(3),i=r.n(n),a=r(73),s=r.n(a),o=(r(80),r(31)),c=r.n(o),g=r(74),u=r(14),h=r(0),p=(r(83),r(145),function(e){return Object(h.jsxs)("form",{onSubmit:e.Search,children:[Object(h.jsx)("input",{type:"text",className:"Textbox",name:"searchTerm",placeholder:"show me a..."}),Object(h.jsx)("button",{className:"Search-button",children:"Dither!"})]})}),l=r(75),b=function(e){function t(e){var t=parseInt((e.r+e.g+e.b)/3>128?255:0);return{r:t,g:t,b:t,a:255}}function r(e,t){var r=parseInt((e.r+e.g+e.b)/3),n=parseInt((t.r+t.g+t.b)/3);return{r:r-n,g:r-n,b:r-n,a:255}}var i=Object(n.useRef)(null),a=function(n,i){var a=new Image;a.src=e.src;var s=350,o=e.h;n.width;a.crossOrigin="anonymous",n.drawImage(a,0,0,s,o);for(var c=n.getImageData(0,0,s,o),g=c.data,u=g.length,h=0;h<u;h+=4){var p={r:g[h+0],g:g[h+1],b:g[h+2],a:g[h+3]},l=t(p);g[h+0]=l.r,g[h+1]=l.g,g[h+2]=l.b,g[h+3]=l.a;var b=r(p,l);try{g[h+0+4]+=7/16*b.r,g[h+1+4]+=7/16*b.g,g[h+2+4]+=7/16*b.b,g[h+3+4]+=7/16*b.a}catch(j){}try{g[h+0-4+4*s]+=3/16*b.r,g[h+1-4+4*s]+=3/16*b.g,g[h+2-4+4*s]+=3/16*b.b,g[h+3-4+4*s]+=3/16*b.a}catch(j){}try{g[h+0+4*s]+=5/16*b.r,g[h+1+4*s]+=5/16*b.g,g[h+2+4*s]+=5/16*b.b,g[h+3+4*s]+=5/16*b.a}catch(j){}try{g[h+0+4+4*s]+=1/16*b.r,g[h+1+4+4*s]+=1/16*b.g,g[h+2+4+4*s]+=1/16*b.b,g[h+3+4+4*s]+=1/16*b.a}catch(j){}}n.putImageData(c,0,0)};return Object(n.useEffect)((function(){var e,t=i.current,r=t.getContext("2d");return function t(){a(r),e=window.requestAnimationFrame(t)}(),function(){window.cancelAnimationFrame(e)}}),[a]),Object(h.jsx)("canvas",Object(l.a)({width:e.w,height:e.h,ref:i},e))},j=r(164),d=function(){var e=Object(n.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(u.a)(e,2),r=t[0],i=t[1],a=Object(n.useState)("Dolphin"),s=Object(u.a)(a,2),o=s[0],l=s[1],d=Object(n.useState)(350),O=Object(u.a)(d,2),m=O[0],f=O[1],w=Object(n.useState)(250),x=Object(u.a)(w,2),y=x[0],v=x[1],q=function(){var e=Object(g.a)(c.a.mark((function e(t){var r,n,a,s,o,g,u,h,p,b,d,O,m,w,x,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.elements.searchTerm.value){e.next=5;break}return l("no image found :("),e.abrupt("return");case 5:return n="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(r,"&format=json"),e.next=8,j(n);case 8:return a=e.sent,e.next=11,a.json();case 11:if(0!==(s=e.sent)[3].length){e.next=15;break}return l("no image found :("),e.abrupt("return");case 15:return o=s[3][0],g=s[3][1],u="https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=pageimages&format=json&piprop=original&titles=".concat(o.substr(30)),h="https://en.wikipedia.org/w/api.php?origin=*&action=query&prop=pageimages&format=json&piprop=original&titles=".concat(g.substr(30)),e.next=21,j(u);case 21:return p=e.sent,e.next=24,j(h);case 24:return b=e.sent,e.next=27,p.json();case 27:return d=e.sent,e.next=30,b.json();case 30:O=e.sent,console.log(d),console.log(O),Object.entries(d.query.pages)[0][1].original?(console.log(Object.entries(d.query.pages)[0][1].original.source),console.log(Object.entries(d.query.pages)[0][1].original),console.log(Object.entries(d.query.pages)[0][1].original.width),console.log(Object.entries(d.query.pages)[0][1].original.height),i(Object.entries(d.query.pages)[0][1].original.source),l(s[1][0]),m=Object.entries(d.query.pages)[0][1].original.width,w=Object.entries(d.query.pages)[0][1].original.height,f(350),v(Math.floor(350/m*w))):Object.entries(O.query.pages)[0][1].original?(i(Object.entries(O.query.pages)[0][1].original.source),l(s[1][0]),console.log(Object.entries(O.query.pages)[0][1].original.source),console.log(Object.entries(O.query.pages)[0][1].original),console.log(Object.entries(O.query.pages)[0][1].original.width),console.log(Object.entries(O.query.pages)[0][1].original.height),x=Object.entries(O.query.pages)[0][1].original.width,y=Object.entries(O.query.pages)[0][1].original.height,f(350),v(Math.floor(350/x*y))):(l("no image found :("),i(""));case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"Box",children:[Object(h.jsx)("h3",{children:"Wiki Dither"}),Object(h.jsxs)("p",{children:["search something on wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(h.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),".",Object(h.jsx)("br",{}),"more dithering algorithms to come :) "]}),Object(h.jsx)(p,{Search:q}),"\xa0",Object(h.jsx)(b,{id:"wiki_dither",src:r,w:m,h:y}),Object(h.jsxs)("p",{className:"caption",children:[o," dithered"]})]})})},O=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,166)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),i(e),a(e),s(e)}))};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(d,{})}),document.getElementById("root")),O()},80:function(e,t,r){}},[[165,1,2]]]);
//# sourceMappingURL=main.28604474.chunk.js.map