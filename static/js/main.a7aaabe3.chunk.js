(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{12:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(5),c=n.n(i),s=(n(12),n(4)),o=n.n(s),d=n(6),u=n(2),h=n(0),p=function(e){return Object(h.jsx)("form",{onSubmit:e.Search,children:Object(h.jsxs)("div",{className:"search-form",children:[Object(h.jsx)("input",{type:"text",className:"Textbox",name:"searchTerm",placeholder:"show me a..."}),Object(h.jsx)("button",{className:"Search-button",children:"Dither!"})]})})},g=n(7),l=function(e){var t=Object(r.useRef)(null),n=function(t){var n=new Image;n.crossOrigin="anonymous",n.src=e.src;var r=300,a=e.h;n.crossOrigin="anonymous",t.drawImage(n,0,0,r,a);for(var i=t.getImageData(0,0,r,a),c=i.data,s=c.length,o=function(e){var t=parseInt((e.r+e.g+e.b)/3>128?255:0);return{r:t,g:t,b:t,a:255}},d=function(e,t){var n=parseInt((e.r+e.g+e.b)/3),r=parseInt((t.r+t.g+t.b)/3);return{r:n-r,g:n-r,b:n-r,a:255}},u=0;u<s;u+=4){var h={r:c[u+0],g:c[u+1],b:c[u+2],a:c[u+3]},p=o(h);c[u+0]=p.r,c[u+1]=p.g,c[u+2]=p.b,c[u+3]=p.a;var g=d(h,p);try{c[u+0+4]+=7/16*g.r,c[u+1+4]+=7/16*g.g,c[u+2+4]+=7/16*g.b,c[u+3+4]+=7/16*g.a}catch(l){}try{c[u+0-4+4*r]+=3/16*g.r,c[u+1-4+4*r]+=3/16*g.g,c[u+2-4+4*r]+=3/16*g.b,c[u+3-4+4*r]+=3/16*g.a}catch(l){}try{c[u+0+4*r]+=5/16*g.r,c[u+1+4*r]+=5/16*g.g,c[u+2+4*r]+=5/16*g.b,c[u+3+4*r]+=5/16*g.a}catch(l){}try{c[u+0+4+4*r]+=1/16*g.r,c[u+1+4+4*r]+=1/16*g.g,c[u+2+4+4*r]+=1/16*g.b,c[u+3+4+4*r]+=1/16*g.a}catch(l){}}t.putImageData(i,0,0)};return Object(r.useEffect)((function(){var e,r=t.current.getContext("2d"),a=function(){window.cancelAnimationFrame(e)};return function t(){n(r),e=window.requestAnimationFrame(t),setTimeout(a,2e3)}(),function(){window.cancelAnimationFrame(e)}}),[n]),Object(h.jsx)("canvas",Object(g.a)({id:"ditherCanvas",width:e.w,height:e.h,ref:t},e))},m=n(15),b=function(){var e=Object(r.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("Dolphin dithered"),c=Object(u.a)(i,2),s=c[0],g=c[1],b=Object(r.useState)(300),j=Object(u.a)(b,2),f=j[0],w=j[1],O=Object(r.useState)(210),x=Object(u.a)(O,2),v=x[0],y=x[1],k=function(){var e=Object(d.a)(o.a.mark((function e(t){var n,r,i,c,s,d,u,h,p,l,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements.searchTerm.value){e.next=4;break}return e.abrupt("return");case 4:return r=encodeURIComponent(n),i="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(r,"&format=json"),e.next=9,m(i);case 9:return c=e.sent,e.next=12,c.json();case 12:return s=e.sent,s[1][0],d=encodeURIComponent(s[1][0]),u="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages%7Cpageterms&titles=".concat(d,"&pilimit=3&piprop=original&pilicense=any&wbptterms=description&redirects="),e.next=18,m(u);case 18:return h=e.sent,e.next=21,h.json();case 21:if(!(p=e.sent).query.pages[0].hasOwnProperty("original")){e.next=32;break}console.log(p.query.pages[0]),l=p.query.pages[0].original.width,b=p.query.pages[0].original.height,a(p.query.pages[0].original.source),w(300),y(Math.floor(300/l*b)),g(p.query.pages[0].title+" dithered"),e.next=34;break;case 32:return g("image not found!"),e.abrupt("return");case 34:case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"Box",children:[Object(h.jsx)("h3",{children:"WikiDither"}),Object(h.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(h.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(h.jsx)(p,{Search:k}),"\xa0",Object(h.jsx)(l,{className:"dithered-image",id:"wiki_dither",src:n,w:f,h:v}),Object(h.jsxs)("div",{className:"caption-grid",children:[Object(h.jsx)("p",{className:"caption",children:s}),Object(h.jsx)("a",{className:"download-container",id:"download",download:"dithered_image.png",children:Object(h.jsx)("button",{type:"button",className:"download-button",onClick:function(){return function(){var e=document.getElementById("download"),t=document.getElementById("wiki_dither").toDataURL("image/png").replace("image/png","image/octet-stream");e.setAttribute("href",t)}()},children:"Download \u21b4"})})]})]})})};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(b,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.a7aaabe3.chunk.js.map