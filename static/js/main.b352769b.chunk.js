(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{12:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(5),o=n.n(i),c=(n(12),n(4)),s=n.n(c),u=n(6),l=n(2),p=n(0),h=function(e){return Object(p.jsx)("form",{onSubmit:e.Search,children:Object(p.jsxs)("div",{className:"search-form",children:[Object(p.jsx)("input",{type:"text",className:"Textbox",name:"searchTerm",placeholder:"show me a..."}),Object(p.jsx)("button",{name:"bw",onClick:function(){return e.setOptionSafari("bw")},className:"bw-button",children:"Dither in b & w"}),Object(p.jsx)("button",{name:"color",onClick:function(){return e.setOptionSafari("color")},className:"color-button",children:"Dither in color"})]})})},d=n(7),g=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var n,r=t.current.getContext("2d"),a=function(){window.cancelAnimationFrame(n)};return function t(){!function(t){var n=new Image;n.crossOrigin="anonymous",n.src=e.src;var r=e.w,a=e.h;n.crossOrigin="anonymous",t.drawImage(n,0,0,r,a);for(var i=t.getImageData(0,0,r,a),o=i.data,c=o.length,s=function(t){if("color"===e.option)return{r:Math.floor(t.r/32)<<6,g:Math.floor(t.g/32)<<6,b:Math.floor(t.b/32)<<6,a:255};var n=parseInt((t.r+t.g+t.b)/3>128?255:0);return{r:n,g:n,b:n,a:255}},u=function(e,t){var n=parseInt((e.r+e.g+e.b)/3),r=parseInt((t.r+t.g+t.b)/3);return{r:n-r,g:n-r,b:n-r,a:255}},l=0;l<c;l+=4){var p={r:o[l+0],g:o[l+1],b:o[l+2],a:o[l+3]},h=s(p);o[l+0]=h.r,o[l+1]=h.g,o[l+2]=h.b,o[l+3]=h.a;var d=u(p,h);try{o[l+0+4]+=7/16*d.r,o[l+1+4]+=7/16*d.g,o[l+2+4]+=7/16*d.b,o[l+3+4]+=7/16*d.a}catch(g){console.log(g)}try{o[l+0-4+4*r]+=3/16*d.r,o[l+1-4+4*r]+=3/16*d.g,o[l+2-4+4*r]+=3/16*d.b,o[l+3-4+4*r]+=3/16*d.a}catch(g){console.log(g)}try{o[l+0+4*r]+=5/16*d.r,o[l+1+4*r]+=5/16*d.g,o[l+2+4*r]+=5/16*d.b,o[l+3+4*r]+=5/16*d.a}catch(g){console.log(g)}try{o[l+0+4+4*r]+=1/16*d.r,o[l+1+4+4*r]+=1/16*d.g,o[l+2+4+4*r]+=1/16*d.b,o[l+3+4+4*r]+=1/16*d.a}catch(g){console.log(g)}}t.putImageData(i,0,0)}(r),n=window.requestAnimationFrame(t),setTimeout(a,2e3)}(),function(){window.cancelAnimationFrame(n)}}),[e]),Object(p.jsx)("canvas",Object(d.a)({id:"ditherCanvas",width:e.w,height:e.h,ref:t},e))},b=n(15),m=function(){var e=Object(r.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)("Dolphin dithered"),o=Object(l.a)(i,2),c=o[0],d=o[1],m=Object(r.useState)(300),j=Object(l.a)(m,2),f=j[0],w=j[1],O=Object(r.useState)(210),x=Object(l.a)(O,2),y=x[0],v=x[1],k=Object(r.useState)("color"),q=Object(l.a)(k,2),S=q[0],I=q[1],N=Object(r.useState)("color"),D=Object(l.a)(N,2),C=D[0],E=D[1],M=function(e){e.nativeEvent.submitter?I(e.nativeEvent.submitter.name):I(C)},_=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,i,o,c,u,l,p,h,g,m,j,f,O,x,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target.elements.searchTerm.value,console.log(t.submitter),n){e.next=5;break}return e.abrupt("return");case 5:return r=encodeURIComponent(n),i="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(r,"&format=json"),e.next=10,b(i);case 10:return o=e.sent,e.next=13,o.json();case 13:return c=e.sent,c[1][0],u=encodeURIComponent(c[1][0]),l="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages&piprop=thumbnail&pithumbsize=600&titles=".concat(u),p="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages%7Cpageterms&titles=".concat(u,"&pilimit=3&piprop=original&pilicense=any&wbptterms=description&redirects="),e.next=20,b(l);case 20:return h=e.sent,e.next=23,h.json();case 23:return g=e.sent,e.next=26,b(p);case 26:return m=e.sent,e.next=29,m.json();case 29:if(j=e.sent,!g.query.pages[0].hasOwnProperty("thumbnail")){e.next=41;break}console.log("thumbnail found: "+g.query.pages[0]),f=g.query.pages[0].thumbnail.width,O=g.query.pages[0].thumbnail.height,a(g.query.pages[0].thumbnail.source),w(300),v(Math.floor(300/f*O)),d(g.query.pages[0].title+" dithered"),M(t),e.next=54;break;case 41:if(!j.query.pages[0].hasOwnProperty("original")){e.next=52;break}console.log("original used: "+j.query.pages[0]),x=j.query.pages[0].original.width,y=j.query.pages[0].original.height,a(j.query.pages[0].original.source),w(300),v(Math.floor(300/x*y)),d(j.query.pages[0].title+" dithered"),M(t),e.next=54;break;case 52:return d("image not found!"),e.abrupt("return");case 54:case 55:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"Box",children:[Object(p.jsx)("h3",{children:"WikiDither"}),Object(p.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(p.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(p.jsx)(h,{Search:_,setOptionSafari:E}),"\xa0",Object(p.jsx)(g,{className:"dithered-image",id:"wiki_dither",src:n,w:f,h:y,option:S}),Object(p.jsxs)("div",{className:"caption-grid",children:[Object(p.jsx)("p",{className:"caption",children:c}),Object(p.jsx)("a",{className:"download-container",id:"download",download:"dithered_image.png",children:Object(p.jsx)("button",{type:"button",className:"download-button",onClick:function(){return function(){var e=document.getElementById("download"),t=document.getElementById("wiki_dither").toDataURL("image/png").replace("image/png","image/octet-stream");e.setAttribute("href",t)}()},children:"Download \u21b4"})})]})]})})};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.b352769b.chunk.js.map