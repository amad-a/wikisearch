(this.webpackJsonpdither=this.webpackJsonpdither||[]).push([[0],{13:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),i=r(6),c=r.n(i),s=(r(13),r(5)),o=r.n(s),u=r(7),h=r(3),p=r(2),g=r(0),d=function(e){var t;return Object(g.jsx)("form",{onSubmit:e.Search,children:Object(g.jsxs)("div",{className:"search-form",children:[Object(g.jsx)("input",(t={className:"Search-input",type:"text"},Object(p.a)(t,"className","Textbox"),Object(p.a)(t,"name","searchTerm"),Object(p.a)(t,"placeholder","show me a..."),t)),Object(g.jsx)("button",{className:"Search-button",children:"Dither!"})]})})},b=r(8),j=function(e){var t=Object(a.useRef)(null),r=function(t){var r=new Image;r.crossOrigin="anonymous",r.src=e.src;var a=300,n=e.h;r.crossOrigin="anonymous",t.drawImage(r,0,0,a,n);for(var i=t.getImageData(0,0,a,n),c=i.data,s=c.length,o=function(e){var t=parseInt((e.r+e.g+e.b)/3>128?255:0);return{r:t,g:t,b:t,a:255}},u=function(e,t){var r=parseInt((e.r+e.g+e.b)/3),a=parseInt((t.r+t.g+t.b)/3);return{r:r-a,g:r-a,b:r-a,a:255}},h=0;h<s;h+=4){var p={r:c[h+0],g:c[h+1],b:c[h+2],a:c[h+3]},g=o(p);c[h+0]=g.r,c[h+1]=g.g,c[h+2]=g.b,c[h+3]=g.a;var d=u(p,g);try{c[h+0+4]+=7/16*d.r,c[h+1+4]+=7/16*d.g,c[h+2+4]+=7/16*d.b,c[h+3+4]+=7/16*d.a}catch(b){}try{c[h+0-4+4*a]+=3/16*d.r,c[h+1-4+4*a]+=3/16*d.g,c[h+2-4+4*a]+=3/16*d.b,c[h+3-4+4*a]+=3/16*d.a}catch(b){}try{c[h+0+4*a]+=5/16*d.r,c[h+1+4*a]+=5/16*d.g,c[h+2+4*a]+=5/16*d.b,c[h+3+4*a]+=5/16*d.a}catch(b){}try{c[h+0+4+4*a]+=1/16*d.r,c[h+1+4+4*a]+=1/16*d.g,c[h+2+4+4*a]+=1/16*d.b,c[h+3+4+4*a]+=1/16*d.a}catch(b){}}t.putImageData(i,0,0)};return Object(a.useEffect)((function(){var e,a=t.current.getContext("2d"),n=function(){window.cancelAnimationFrame(e)};return function t(){r(a),e=window.requestAnimationFrame(t),setTimeout(n,2e3)}(),function(){window.cancelAnimationFrame(e)}}),[r]),Object(g.jsx)("canvas",Object(b.a)({width:e.w,height:e.h,ref:t},e))},m=r(16),l=function(){var e=Object(a.useState)("https://upload.wikimedia.org/wikipedia/commons/1/10/Tursiops_truncatus_01.jpg"),t=Object(h.a)(e,2),r=t[0],n=t[1],i=Object(a.useState)("Dolphin dithered"),c=Object(h.a)(i,2),s=c[0],p=c[1],b=Object(a.useState)(300),l=Object(h.a)(b,2),f=l[0],O=l[1],w=Object(a.useState)(210),x=Object(h.a)(w,2),v=x[0],y=x[1],k=function(){var e=Object(u.a)(o.a.mark((function e(t){var r,a,i,c,s,u,h,g,d,b,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=t.target.elements.searchTerm.value){e.next=4;break}return e.abrupt("return");case 4:return a=encodeURIComponent(r),i="https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=".concat(a,"&format=json"),e.next=9,m(i);case 9:return c=e.sent,e.next=12,c.json();case 12:return s=e.sent,s[1][0],u=encodeURIComponent(s[1][0]),h="https://en.wikipedia.org/w/api.php?origin=*&action=query&format=json&formatversion=2&prop=pageimages%7Cpageterms&titles=".concat(u,"&pilimit=3&piprop=original&pilicense=any&wbptterms=description&redirects="),e.next=18,m(h);case 18:return g=e.sent,e.next=21,g.json();case 21:if(!(d=e.sent).query.pages[0].hasOwnProperty("original")){e.next=32;break}console.log(d.query.pages[0]),b=d.query.pages[0].original.width,j=d.query.pages[0].original.height,n(d.query.pages[0].original.source),O(300),y(Math.floor(300/b*j)),p(d.query.pages[0].title+" dithered"),e.next=34;break;case 32:return p("image not found!"),e.abrupt("return");case 34:case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"container",children:Object(g.jsxs)("div",{className:"Box",children:[Object(g.jsx)("h3",{children:"WikiDither"}),Object(g.jsxs)("p",{children:["search something on Wikipedia (the free encyclopedia) and see its page image dithered using the ",Object(g.jsx)("a",{href:"https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering",children:"Floyd-Steinberg Dithering Algorithm"}),"."]}),Object(g.jsx)(d,{Search:k}),"\xa0",Object(g.jsx)(j,{className:"dithered-image",id:"wiki_dither",src:r,w:f,h:v}),Object(g.jsx)("p",{className:"caption",children:s})]})})};c.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(l,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.d8aa8950.chunk.js.map